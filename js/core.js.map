{"version":3,"sources":["core.js"],"names":["googlePlus","url","window","location","protocol","host","open","components","forms","doc","win","updateZIPPlaceholder","ZIPLabel","getElementById","countrySelect","value","setAttribute","toggleCountryField","countryInput","remove","classList","add","countryLabel","removeForm","commitmentForm","clientHeight","setTimeout","handleSigningError","e","errorMessage","createElement","errorMessageInfo","removeAttribute","submitted","textContent","type","status","statusText","modals","generateModal","submitButton","handleSigningSuccess","modalContent","share","getElementsByClassName","console","log","innerHTML","document","querySelector","addEventListener","FreeProgress","bind","tweet","submitForm","event","compilePayload","petitionFormData","identifier","website","origin","tags","JSON","parse","noOptIn","name","email","ZIP","country","comments","stringify","loadSignatureResponse","commitmentStatus","preventDefault","XMLHttpRequest","appendChild","dataset","setRequestHeader","send","addEventListeners","init","body","getElementsByTagName","dismissModal","modal","contents","disableOverlayClick","closeModal","overlay","undefined","length","id","i","modalParent","noConnectionModal","message","views","$c","triggerComponents","split","listenerFn","top","pageYOffset","scrollTop","clientTop","removeEventListener","gl","querySelectorAll","href","indexOf","script","src","head"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;AAgaA,QAASA,cACP,GAAIC,GAAMC,OAAOC,SAASC,SAAW,KAAOF,OAAOC,SAASE,IAC5DH,QAAOI,KAAK,qCAAqCL,EAAK,WAAY,4DA3YpEC,OAAOK,WAAaL,OAAOK,eAC3BL,OAAOK,WAAWC,MAAQ,SAAUC,EAAKC,GAMvC,YAcA,SAASC,KAKP,GACEC,GAAWH,EAAII,eAAe,gBAEJ,QAAxBC,EAAcC,MAChBH,EAASI,aAAa,cAAe,aAErCJ,EAASI,aAAa,cAAe,OAIzC,QAASC,KAMPC,EAAaC,SACbL,EAAcE,aAAa,OAAQ,mBACnCF,EAAcM,UAAUC,IAAI,WAC5BC,EAAaF,UAAUC,IAAI,UAG7B,QAASE,KACPC,EAAeR,aAAa,QAAS,WAAaQ,EAAeC,aAAe,OAChFf,EAAIgB,WAAW,WACbF,EAAeR,aAAa,QAAS,eACpC,IAGL,QAASW,GAAmBC,GAO1B,GACEC,GAAepB,EAAIqB,cAAc,MACjCC,EAAmBtB,EAAIqB,cAAc,IAEvCN,GAAeQ,gBAAgB,YAC/BC,EAAUd,SACVU,EAAaK,YAAc,uBACvBN,EAAEO,KACJJ,EAAiBG,YAAc,iIACtBN,EAAEQ,OACXL,EAAiBG,YAAc,4DAA8DN,EAAEQ,OAAS,eAAiBR,EAAES,WAAa,MAExIN,EAAiBG,YAAc,+DAGjCxB,EAAI4B,OAAOC,eAAeV,EAAcE,IAExCE,EAAUd,SACVqB,EAAaR,gBAAgB,YAG/B,QAASS,KAOP,GACEC,GAAejC,EAAIqB,cAAc,OACjCa,EAAQlC,EAAImC,uBAAuB,SAAS,EAE9CC,SAAQC,IAAI,SAAUH,GAEtBA,EAAMvB,UAAUC,IAAI,WACpBqB,EAAaK,UAAY,kHAAkHJ,EAAMI,UAAU,6JAE3JrC,EAAI4B,OAAOC,eAAeG,IAC1BnB,IAEAyB,SAASC,cAAc,kCAAkCC,iBAAiB,QAASC,aAAaR,MAAMS,KAAKD,eAC3GH,SAASC,cAAc,gCAAgCC,iBAAiB,QAASlD,YACjFgD,SAASC,cAAc,iCAAiCC,iBAAiB,QAASC,aAAaE,MAAMD,KAAKD,eAG5G,QAASG,GAAWC,GAgBlB,QAASC,KAMP,GACEC,IACEC,WAAY,uCACZC,QAASjD,EAAIP,SAASyD,OACtBC,KAAMC,KAAKC,MAAMtD,EAAIwC,cAAc,mCAAmClC,OACtEiD,SAAS,EACTC,KAAMxD,EAAII,eAAe,mBAAmBE,MAC5CmD,MAAOzD,EAAII,eAAe,cAAcE,MACxCoD,IAAK1D,EAAII,eAAe,iBAAiBE,MACzCqD,QAAStD,EAAcC,MACvBsD,SAAU5D,EAAII,eAAe,iBAAiBE,MAGlD,OAAO+C,MAAKQ,UAAUb,GAGxB,QAASc,KAKHC,EAAiBpC,QAAU,KAAOoC,EAAiBpC,OAAS,IAC9DK,IAEAd,EAAmB6C,GAxCvBjB,EAAMkB,gBAEN,IACED,GAAmB,GAAIE,eAEzBlD,GAAeR,aAAa,YAAY,GACxCiB,EAAUb,UAAUC,IAAI,aACxBmB,EAAaxB,aAAa,YAAY,GACtCQ,EAAemD,YAAY1C,GAoC3BuC,EAAiBlE,KAAK,OAAQkB,EAAeoD,QAAQvE,KAAO,eAAe,GAC3EmE,EAAiBK,iBAAiB,eAAgB,oBAClDL,EAAiBtB,iBAAiB,QAASvB,GAC3C6C,EAAiBtB,iBAAiB,OAAQqB,GAC1CC,EAAiBM,KAAKtB,KAGxB,QAASuB,KAIPzD,EAAa4B,iBAAiB,QAASjC,GACvCH,EAAcoC,iBAAiB,SAAUvC,GACzCa,EAAe0B,iBAAiB,SAAUI,GAG5C,QAAS0B,KACPD,IArKF,GACEE,GAAOxE,EAAIyE,qBAAqB,QAAQ,GACxC1C,EAAeyC,EAAKhC,cAAc,mBAClChB,EAAYxB,EAAIqB,cAAc,OAC9BR,EAAeb,EAAIwC,cAAc,0BACjCnC,EAAgBL,EAAII,eAAe,kBACnCK,EAAeT,EAAII,eAAe,kBAClCW,EAAiBf,EAAID,MAAM,EAE7ByB,GAAUb,UAAUC,IAAI,aACxBY,EAAUc,UAAY,gHA8JtBiC,KAIA,SAAUvE,EAAKC,GACf,YAWA,SAASyE,KAKP,GACEC,GAAQ3E,EAAImC,uBAAuB,iBAAiB,EAEtDnC,GAAImC,uBAAuB,WAAW,GAAGzB,SACzCiE,EAAMpD,gBAAgB,SACtBoD,EAAMhE,UAAUC,IAAI,cACpBX,EAAIgB,WAAW,WACb0D,EAAMjE,UACL,KAGL,QAASoB,GAAc8C,EAAUC,GAW/B,GAGEC,GAFAC,EAAU/E,EAAIqB,cAAc,OAC5BsD,EAAQ3E,EAAIqB,cAAc,MAwB5B,KArBwB2D,SAApBJ,EAASK,SACXL,GAAYA,IAGqB,iBAAxBC,KACTA,GAAsB,GAGxBE,EAAQG,GAAKL,EAAsB,mBAAqB,aACxDE,EAAQpE,UAAUC,IAAI,WACtB+D,EAAMhE,UAAUC,IAAI,iBAEfiE,IACHC,EAAa9E,EAAIqB,cAAc,UAC/ByD,EAAWnE,UAAUC,IAAI,eACzBkE,EAAWxC,UAAY,UACvBqC,EAAMT,YAAYY,GAClBA,EAAWrC,iBAAiB,QAASiC,GACrCK,EAAQtC,iBAAiB,QAASiC,IAG/BS,EAAI,EAAGA,EAAIP,EAASK,OAAQE,IAC/BR,EAAMT,YAAYU,EAASO,GAG7BC,GAAYlB,YAAYa,GACxBK,EAAYlB,YAAYS,GACxBH,EAAKN,YAAYkB,GAEjBnF,EAAIgB,WAAW,WACbmE,EAAYzE,UAAUD,OAAO,YAC5B,KAGL,QAAS2E,KAQPX,GACA,IACEY,GAAUtF,EAAIqB,cAAc,KAE9BiE,GAAQhD,UAAY,+DACpBR,GAAewD,IAxFjBrF,EAAI4B,OAAS5B,EAAI4B,UAEjB,IACEsD,GACAX,EAAOxE,EAAIyE,qBAAqB,QAAQ,GACxCW,EAAcpF,EAAIqB,cAAc,MAElC+D,GAAYzE,UAAUC,IAAI,eAAgB,WAoF1CX,EAAI4B,OAAO6C,aAAeA,EAC1BzE,EAAI4B,OAAOC,cAAgBA,EAC3B7B,EAAI4B,OAAOwD,kBAAoBA,GAG/B9C,SAAU9C,QAOX,SAAUO,EAAKC,GACd,YAWA,SAASyE,KAKP,GACEC,GAAQ3E,EAAImC,uBAAuB,gBAAgB,EAErDwC,GAAMpE,aAAa,QAAS,cAE5BN,EAAIgB,WAAW,WACb0D,EAAMjE,UACL,KAGL,QAASoB,GAAc8C,EAAUC,GAW/B,GAGEC,GAFAC,EAAU/E,EAAIqB,cAAc,OAC5BsD,EAAQ3E,EAAIqB,cAAc,MAwB5B,KArBwB2D,SAApBJ,EAASK,SACXL,GAAYA,IAGqB,iBAAxBC,KACTA,GAAsB,GAGxBE,EAAQG,GAAKL,EAAsB,mBAAqB,aACxDE,EAAQpE,UAAUC,IAAI,WACtB+D,EAAMhE,UAAUC,IAAI,gBAAiB,cAEhCiE,IACHC,EAAa9E,EAAIqB,cAAc,UAC/ByD,EAAWnE,UAAUC,IAAI,eACzBkE,EAAWxC,UAAY,UACvBqC,EAAMT,YAAYY,GAClBA,EAAWrC,iBAAiB,QAASiC,GACrCK,EAAQtC,iBAAiB,QAASiC,IAG/BS,EAAI,EAAGA,EAAIP,EAASK,OAAQE,IAC/BR,EAAMT,YAAYU,EAASO,GAG7BC,GAAYlB,YAAYa,GACxBK,EAAYlB,YAAYS,GACxBH,EAAKN,YAAYkB,GAEjBnF,EAAIgB,WAAW,WACb0D,EAAMhE,UAAUD,OAAO,eACtB,IAGL,QAAS2E,KAQPX,GACA,IACEY,GAAUtF,EAAIqB,cAAc,KAE9BiE,GAAQhD,UAAY,+DACpBR,GAAewD,IAvFjBrF,EAAI4B,OAAS5B,EAAI4B,UAEjB,IACEsD,GACAX,EAAOxE,EAAIyE,qBAAqB,QAAQ,GACxCW,EAAcpF,EAAIqB,cAAc,MAElC+D,GAAYzE,UAAUC,IAAI,gBAmF1BX,EAAI4B,OAAO6C,aAAeA,EAC1BzE,EAAI4B,OAAOC,cAAgBA,EAC3B7B,EAAI4B,OAAOwD,kBAAoBA,GAG/B9C,SAAU9C,QAEV,SAAUO,EAAKC,GACfA,EAAIsF,MAAQtF,EAAIsF,UAChBtF,EAAIsF,MAAM1D,WAAaU,SAAU9C,OAElC,IAAI+F,IAAMjD,SAASlB,cAAcsB,KAAKJ,WAOvC,SAAWvC,EAAKC,GACd,YAEA,SAASwF,KACPxF,EAAIH,WAAaG,EAAIH,cACrB,IACEqF,GAAI,EACJrF,EAAaE,EAAIyE,qBAAqB,QAAQ,GAAGN,QAAQrE,UAE3D,IAAmBkF,SAAflF,EAIF,IAHAA,EAAaA,EAAW4F,MAAM,KAC9BP,EAAIrF,EAAWmF,OAERE,KACiB,KAAlBrF,EAAWqF,IAA+CH,SAAlC/E,EAAIH,WAAWA,EAAWqF,KACpDlF,EAAIH,WAAWA,EAAWqF,IAAInF,EAAKC,GAM3CwF,GAEA,IAAIE,GAAa,WACf,GAAIC,IAAOnG,OAAOoG,aAAe7F,EAAI8F,YAAe9F,EAAI+F,WAAa,EACjEH,GAAM,MACRnG,OAAOuG,oBAAoB,SAAUL,GACrCpD,SAASC,cAAc,YAAY7B,UAAUC,IAAI,YAIrDnB,QAAOgD,iBAAiB,SAAUkD,EAGhC,KAAK,GADHM,GAAK1D,SAAS2D,iBAAiB,iBACxBf,EAAI,EAAGA,EAAIc,EAAGhB,OAAQE,IAC3Bc,EAAGd,GAAG1C,iBAAiB,QAAS,SAAStB,GACrCA,EAAE6C,iBACFzE,eACD,EAGT,IAA8D,KAA1DE,OAAOC,SAASyG,KAAKC,QAAQ,yBAAiC,CAChE,GAAIC,GAAS9D,SAASlB,cAAc,SACpCgF,GAAOC,IAAM,aACb/D,SAASgE,KAAKrC,YAAYmC,KAI3B9D,SAAU9C","file":"core.js","sourcesContent":["/*\n @licstart  The following is the entire license notice for the\n    JavaScript code in this page.\n\n Copyright (C) 2015 Fight for the Future\n\n The JavaScript code in this page is free software: you can\n redistribute it and/or modify it under the terms of the GNU\n General Public License (GNU GPL) as published by the Free Software\n Foundation, either version 3 of the License, or (at your option)\n any later version. The code is distributed WITHOUT ANY WARRANTY;\n without even the implied warranty of MERCHANTABILITY or FITNESS\n FOR A PARTICULAR PURPOSE. See the GNU GPL for more details.\n\n As additional permission under GNU GPL version 3 section 7, you\n may distribute non-source (e.g., minimized or compacted) forms of\n that code without the copy of the GNU GPL normally required by\n section 4, provided you include this license notice and a URL\n through which recipients can access the Corresponding Source.\n\n @licend  The above is the entire license notice\n    for the JavaScript code in this page.\n*/\nwindow.components = window.components || {};\nwindow.components.forms = function (doc, win) {\n  /**\n   * Retrieves form data from Action Network API, then submits entry\n   * @param {object} doc - Document object\n   * @param {object} win - Window object\n   * */\n  \"use strict\";\n\n  var\n    body = doc.getElementsByTagName('body')[0],\n    submitButton = body.querySelector('[type=\"submit\"]'),\n    submitted = doc.createElement('div'),\n    countryLabel = doc.querySelector('[for=\"select-country\"]'),\n    countrySelect = doc.getElementById('select-country'),\n    countryInput = doc.getElementById('hidden-country'),\n    commitmentForm = doc.forms[0];\n\n  submitted.classList.add('submitted');\n  submitted.innerHTML = '<h2>Hang on a tick&hellip;</h2><h3>&hellip;reticulating splines.</h3><div class=\"circle-spinner\">&nbsp;</div>';\n\n  function updateZIPPlaceholder() {\n    /**\n     * Updates placeholder on ZIP/Post Code field to be appropriate for country\n     * selected\n     * */\n    var\n      ZIPLabel = doc.getElementById('form-zip_code');\n\n    if (countrySelect.value !== 'US') {\n      ZIPLabel.setAttribute('placeholder', 'Post code');\n    } else {\n      ZIPLabel.setAttribute('placeholder', 'ZIP');\n    }\n  }\n\n  function toggleCountryField() {\n    /**\n     * Hides the label and shows the select when someone changes their signature\n     * country.\n     * */\n\n    countryInput.remove();\n    countrySelect.setAttribute('name', 'answer[country]');\n    countrySelect.classList.add('visible');\n    countryLabel.classList.add('hidden');\n  }\n\n  function removeForm() {\n    commitmentForm.setAttribute('style', 'height: ' + commitmentForm.clientHeight + 'px;');\n    win.setTimeout(function(){\n      commitmentForm.setAttribute('style', 'height: 0;');\n    }, 20)\n  }\n\n  function handleSigningError(e) {\n    /**\n     * Figures out what to say at just the right moment\n     * @param {event|XMLHttpRequest} e - Might be an event, might be a response\n     * from an XMLHttpRequest\n     * */\n\n    var\n      errorMessage = doc.createElement('h2'),\n      errorMessageInfo = doc.createElement('p');\n\n    commitmentForm.removeAttribute('disabled');\n    submitted.remove();\n    errorMessage.textContent = 'Something went wrong';\n    if (e.type) {\n      errorMessageInfo.textContent = 'There seems to be a problem somewhere in between your computer and our server. Might not be a bad idea to give it another try.';\n    } else if (e.status) {\n      errorMessageInfo.textContent = '(the nerdy info is that the server returned a status of \"' + e.status + '\" and said \"' + e.statusText + '\".)'\n    } else {\n      errorMessageInfo.textContent = 'this seems to be a weird error. the nerds have been alerted.';\n    }\n\n    win.modals.generateModal([errorMessage, errorMessageInfo]);\n\n    submitted.remove();\n    submitButton.removeAttribute('disabled');\n  }\n\n  function handleSigningSuccess() {\n    /**\n     * Figures out what to say at just the right moment\n     * @param {event|XMLHttpRequest} e - Might be an event, might be a response\n     * from an XMLHttpRequest\n     * */\n\n    var\n      modalContent = doc.createElement('div'),\n      share = doc.getElementsByClassName('share')[0];\n\n    console.log('share:' ,share);\n\n    share.classList.add('visible');\n    modalContent.innerHTML = '<h2>Thanks for signing</h2>\\n<p>Now, share this page to spread the word.</p><ul class=\"share inline visible\">\\n'+share.innerHTML+'</ul><p><small>…or, <a href=\"https://donate.fightforthefuture.org/?amount=5&frequency=just-once\">chip in $5</a> to help us spread the message.</small></p>';\n\n    win.modals.generateModal([modalContent]);\n    removeForm();\n\n    document.querySelector('.modal-content button.facebook').addEventListener('click', FreeProgress.share.bind(FreeProgress));\n    document.querySelector('.modal-content button.google').addEventListener('click', googlePlus);\n    document.querySelector('.modal-content button.twitter').addEventListener('click', FreeProgress.tweet.bind(FreeProgress));\n  }\n\n  function submitForm(event) {\n    /**\n     * Submits the form to ActionNetwork.\n     * @param {event} event - Form submission event\n     * */\n\n    event.preventDefault();\n\n    var\n      commitmentStatus = new XMLHttpRequest();\n\n    commitmentForm.setAttribute('disabled', true);\n    submitted.classList.add('submitted');\n    submitButton.setAttribute('disabled', true);\n    commitmentForm.appendChild(submitted);\n\n    function compilePayload() {\n      /**\n       * Compiles the form data into a JSON payload for Ajax submission\n       * @return {object} petitionFormData - just the info the API needs\n       * */\n\n      var\n        petitionFormData = {\n          identifier: 'dad151da-e162-4ec5-8679-655bfcb2d03f',\n          website: win.location.origin,\n          tags: JSON.parse(doc.querySelector('[name=\"subscription[tag_list]\"]').value),\n          noOptIn: false,\n          name: doc.getElementById('form-first_name').value,\n          email: doc.getElementById('form-email').value,\n          ZIP: doc.getElementById('form-zip_code').value,\n          country: countrySelect.value,\n          comments: doc.getElementById('form-comments').value\n        };\n\n      return JSON.stringify(petitionFormData);\n    }\n\n    function loadSignatureResponse() {\n      /**\n       * Does the thing after we get a response from the API server\n       * */\n\n      if (commitmentStatus.status >= 200 && commitmentStatus.status < 400) {\n        handleSigningSuccess();\n      } else {\n        handleSigningError(commitmentStatus);\n      }\n    }\n\n    commitmentStatus.open('POST', commitmentForm.dataset.host + '/submission', true);\n    commitmentStatus.setRequestHeader('Content-Type', 'application/json');\n    commitmentStatus.addEventListener('error', handleSigningError);\n    commitmentStatus.addEventListener('load', loadSignatureResponse);\n    commitmentStatus.send(compilePayload());\n  }\n\n  function addEventListeners() {\n    /**\n     * Attaches all the listeners all the places\n     * */\n    countryLabel.addEventListener('click', toggleCountryField);\n    countrySelect.addEventListener('change', updateZIPPlaceholder);\n    commitmentForm.addEventListener('submit', submitForm);\n  }\n\n  function init() {\n    addEventListeners();\n  }\n\n  init();\n  // setTimeout(function() { handleSigningSuccess() }, 500); // JL DEBUG ~\n};\n\n;(function (doc, win) {\n  \"use strict\";\n\n  win.modals = win.modals || {};\n\n  var\n    i,\n    body = doc.getElementsByTagName('body')[0],\n    modalParent = doc.createElement('div');\n\n  modalParent.classList.add('modal-parent', 'fade-in');\n\n  function dismissModal() {\n    /**\n     * Removes modal from DOM\n     * */\n\n    var\n      modal = doc.getElementsByClassName('modal-content')[0];\n\n    doc.getElementsByClassName('overlay')[0].remove();\n    modal.removeAttribute('style');\n    modal.classList.add('off-screen');\n    win.setTimeout(function () {\n      modal.remove();\n    }, 420);\n  }\n\n  function generateModal(contents, disableOverlayClick) {\n    /**\n     * Triggers a modal\n     *\n     * @param {node} contents - any HTML to be used as modal content (also\n     *   accepts array of nodes)\n     * @param {boolean} disableOverlayClick - if false (or absent), function\n     *   adds event listener to allow dismissal of modal by clicking on\n     *   overlay.\n     * */\n\n    var\n      overlay = doc.createElement('div'),\n      modal = doc.createElement('div'),\n      closeModal;\n\n    if (contents.length === undefined) {\n      contents = [contents];\n    }\n\n    if (typeof disableOverlayClick !== 'boolean') {\n      disableOverlayClick = false;\n    }\n\n    overlay.id = disableOverlayClick ? 'no-click-for-you' : 'dismiss-me';\n    overlay.classList.add('overlay');\n    modal.classList.add('modal-content');\n\n    if (!disableOverlayClick) {\n      closeModal = doc.createElement('button');\n      closeModal.classList.add('close-modal');\n      closeModal.innerHTML = '&times;';\n      modal.appendChild(closeModal);\n      closeModal.addEventListener('click', dismissModal);\n      overlay.addEventListener('click', dismissModal);\n    }\n\n    for (i = 0; i < contents.length; i++) {\n      modal.appendChild(contents[i]);\n    }\n\n    modalParent.appendChild(overlay);\n    modalParent.appendChild(modal);\n    body.appendChild(modalParent);\n\n    win.setTimeout(function () {\n      modalParent.classList.remove('fade-in');\n    }, 500);\n  }\n\n  function noConnectionModal() {\n    /**\n     * noConnectionModal();\n     * Triggers a modal which reads:\n     * > Something went wrong.\n     * > Do you have a network connection?\n     * */\n\n    dismissModal();\n    var\n      message = doc.createElement('h2');\n\n    message.innerHTML = 'Something went wrong.<br />Do you have a network connection?';\n    generateModal([message]);\n  }\n\n  win.modals.dismissModal = dismissModal;\n  win.modals.generateModal = generateModal;\n  win.modals.noConnectionModal = noConnectionModal;\n\n\n}(document, window));\n\n\n\n/******************** *\n * FFTF Donate Modals *\n ******************** */\n(function (doc, win) {\n  \"use strict\";\n\n  win.modals = win.modals || {};\n\n  var\n    i,\n    body = doc.getElementsByTagName('body')[0],\n    modalParent = doc.createElement('div');\n\n  modalParent.classList.add('modal-parent');\n\n  function dismissModal() {\n    /**\n     * Removes modal from DOM\n     * */\n\n    var\n      modal = doc.getElementsByClassName('modal-parent')[0];\n\n    modal.setAttribute('style', 'opacity: 0');\n\n    win.setTimeout(function () {\n      modal.remove();\n    }, 420);\n  }\n\n  function generateModal(contents, disableOverlayClick) {\n    /**\n     * Triggers a modal\n     *\n     * @param {node} contents - any HTML to be used as modal content (also\n     *   accepts array of nodes)\n     * @param {boolean} disableOverlayClick - if false (or absent), function\n     *   adds event listener to allow dismissal of modal by clicking on\n     *   overlay.\n     * */\n\n    var\n      overlay = doc.createElement('div'),\n      modal = doc.createElement('div'),\n      closeModal;\n\n    if (contents.length === undefined) {\n      contents = [contents];\n    }\n\n    if (typeof disableOverlayClick !== 'boolean') {\n      disableOverlayClick = false;\n    }\n\n    overlay.id = disableOverlayClick ? 'no-click-for-you' : 'dismiss-me';\n    overlay.classList.add('overlay');\n    modal.classList.add('modal-content', 'off-screen');\n\n    if (!disableOverlayClick) {\n      closeModal = doc.createElement('button');\n      closeModal.classList.add('close-modal');\n      closeModal.innerHTML = '&times;';\n      modal.appendChild(closeModal);\n      closeModal.addEventListener('click', dismissModal);\n      overlay.addEventListener('click', dismissModal);\n    }\n\n    for (i = 0; i < contents.length; i++) {\n      modal.appendChild(contents[i]);\n    }\n\n    modalParent.appendChild(overlay);\n    modalParent.appendChild(modal);\n    body.appendChild(modalParent);\n\n    win.setTimeout(function () {\n      modal.classList.remove('off-screen');\n    }, 50);\n  }\n\n  function noConnectionModal() {\n    /**\n     * noConnectionModal();\n     * Triggers a modal which reads:\n     * > Something went wrong.\n     * > Do you have a network connection?\n     * */\n\n    dismissModal();\n    var\n      message = doc.createElement('h2');\n\n    message.innerHTML = 'Something went wrong.<br />Do you have a network connection?';\n    generateModal([message]);\n  }\n\n  win.modals.dismissModal = dismissModal;\n  win.modals.generateModal = generateModal;\n  win.modals.noConnectionModal = noConnectionModal;\n\n\n}(document, window));\n\n;(function (doc, win) {\n  win.views = win.views || {};\n  win.views.modals = {}}(document, window));\n\n;var $c  = document.createElement.bind(document);\n\nfunction googlePlus() {\n  var url = window.location.protocol + '//' + window.location.host;\n  window.open('https://plus.google.com/share?url='+url, 'share_gl', 'width=500, height=300, toolbar=no, status=no, menubar=no');\n}\n\n(function (doc, win) {\n  \"use strict\";\n\n  function triggerComponents() {\n    win.components = win.components || {};\n    var\n      i = 0,\n      components = doc.getElementsByTagName('body')[0].dataset.components;\n\n    if (components !== undefined) {\n      components = components.split(' ');\n      i = components.length;\n\n      while (i--) {\n        if (components[i] !== '' && win.components[components[i]] !== undefined) {\n          win.components[components[i]](doc, win);\n        }\n      }\n    }\n  }\n\n  triggerComponents();\n\n  var listenerFn = function() {\n    var top = (window.pageYOffset || doc.scrollTop)  - (doc.clientTop || 0);\n    if (top > 300) {\n      window.removeEventListener('scroll', listenerFn);\n      document.querySelector('ul.share').classList.add('visible');\n    }\n  }\n\n  window.addEventListener('scroll', listenerFn);\n\n  var gl = document.querySelectorAll('button.google');\n    for (var i = 0; i < gl.length; i++) {\n        gl[i].addEventListener('click', function(e) {\n            e.preventDefault();\n            googlePlus();\n        }, false);\n    }\n\n  if (window.location.href.indexOf('ALWAYS_SHOW_SC_BANNER') !== -1) {\n    var script = document.createElement('script');\n    script.src = '/banner.js';\n    document.head.appendChild(script);\n  }\n\n\n})(document, window);\n\n//# sourceMappingURL=core.js.map"]}